<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0041)http://v3.unotice.cn/weibo/client/listing -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<meta http-equiv="x-ua-compatible" content="ie=7">
<title>微博监控 - 舆情监控系统</title>
<link rel="stylesheet" href="/static/css/css/style.css" type="text/css" media="all">
<link id="themeCSS" rel="stylesheet" href="/static/css/css/style_blue.css" type="text/css" media="all">
<script src="/static/css/js/jquery-1.4.4.min.js" type="text/javascript"></script>

<script src="/static/css/js/htip.js" type="text/javascript"></script>
<link rel="stylesheet" href="/static/css/css/htip.css" type="text/css" media="all">
<style type="text/css">
.headerTitle{font-size:24px;font-family:ºÚÌå;color:#ffffff;position: relative;top: 8px;}
</style>
</head>

<body>
<!--top_nav start-->
<!-- <div class="top_nav_wrap">
    <div class="top_nav">
        <div class="fr">
            <ul id="head_nav">
                <li class="logined">欢迎您</li>               
                <li class="revise"><a href="http://v3.unotice.cn/client/profile">修改资料</a></li>                
                <li class="key"><a href="http://v3.unotice.cn/client/site/word" title="关键词设置">关键词设置</a></li>
                <li class="quit"><a href="http://v3.unotice.cn/auth/logout" target="_top" title="退出系统">退出系统</a></li>
            </ul>
        </div>
    </div>
</div> -->
<!--top end-->

<!--banner start-->
<div class="banner_wrap">
    <div class="banner">
        <div class="banner_bg">
            <table border="0" cellpadding="0" cellspacing="0" height="97" width="750">
                <tbody><tr>
                    <td>
                        <img src="/static/css/images/bhsocial.gif" border="0"><span class="headerTitle"> - 九一八舆情</span>                 </td>
                </tr>
            </tbody></table>
        </div>
<!--                 <div class="search">
            <div class="search_box_l"></div>
            <input type="hidden" value="title" name="search_type">
            <input type="hidden" value="7days" name="date_type">
            <input type="hidden" value="-1" name="brand_id">
            <input type="hidden" value="-1" name="product_id">
            <input name="search" value="" type="text" id="search_box" class="search_box">
            <input name="submit" onclick="javascript:if($(&#39;#search_box&#39;).val() == &#39;&#39;){alert (&#39;请填写要查找的内容。&#39;);return false;};" type="submit" class="search_btn" value="">
            
        </div> -->
            </div>
</div>
<!--banner end-->

<!--menu start-->
<!-- <div class="nav_wrap">
   <li style="display:inline;padding-left:300px;font-size:15px;line-height:35px"><label onclick="load_xinwen();">微博</label></li>
   <li style="display:inline;padding-left:120px;font-size:15px"><a href="">博客</label></li>
   <li style="display:inline;padding-left:120px;font-size:15px"><a href="">新闻</label></li>
   <li style="display:inline;padding-left:120px;font-size:15px"><a href="">论坛</label></li>
</div> -->
<!--menu end-->
<script type="text/javascript" src="/static/css/js/thickbox.js"></script>
<link rel="stylesheet" href="/static/css/css/thickbox.css" type="text/css" media="all">
<div id="floatMenu"></div>
<div class="main2">
    <div class="leftbox">
        <ul>
            <li class="menu_main">
                <a href="/index/gaishu/">
                    舆情概况
                </a>
            </li>
            <li class="menu_main"><a href="/index/zhibiao/">舆情指数</a></li>
            <li class="menu_main"><a href="#">监控预警</a></li>
                        <li class="menu_main_on">
            <a href="time.html">深度分析</a>
            </li>
            <li class="menu_son"><a href="/index/time/">时间分析</a></li>  
            <li class="menu_son"><a href="/index/area/">地域分析</a></li>
            <li class="menu_son"><a href="/index/network/">网络分析</a></li>
            <li class="menu_son"><a href="/index/semantic/">语义分析</a></li>
            <li class="menu_son"><a href="/index/moodlens/">情感分析</a></li>
        </ul>
    </div>
    <div class="rightbox">
            <li class="menu_son" style="width:100px;height:25px"><span><label onclick="attention();">关注度曲线</label><span><li>
            <li class="menu_son" style="width:100px;height:25px"><span><label onclick="quickness();">爆发度曲线</label><span><li>   
            <li class="menu_son" style="width:100px;height:25px"><span><label onclick="penetration();">渗透度曲线</label><span><li>
        

    <div id="main1" style="height:240px;width:800px"></div>
    <!-- ECharts单文件引入 -->
    <script src="/static/css/echarts-2.0.0/build/echarts-plain.js"></script>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts图表
       
        var attention_list=[];
        var quickness_list=[];
        var penetration_list=[];
        var ts_list=[];
        var ts_list1=[];
        var ts_list2=[];

       $(document).ready(function(){   //网页加载时执行下面函数
           attention();
        })

    function attention () {
        var time;
        for (time = 0 ; time < 60 ;time++)
        {
            getattention_data(time);
        }
      

        drawattention(attention_list,ts_list);
    }

    function drawattention(attentiondata,ts_data){

        var time_af=[];
        for (var i = 0; i < ts_data.length; i++){

            ns= new Date(parseInt(ts_data[i]) * 1000).toLocaleString();

            time_af.push(ns);
        }
        
        var axisData = time_af;
        var option = {
            title : {
                text: '关注度曲线',
                x: 'center',
                y: 10,
                textStyle:{
                    fontSize: 12,
                    fontWeight: 'bolder',
                    color: '#333',
                    } 
            },
            tooltip : {
                trigger: 'axis',
                showDelay: 0             // 显示延迟，添加显示延迟可以避免频繁切换，单位ms
            },
            legend: {
                y : -30,
                data:['关注度','爆发度','渗透度']
            },
            toolbox: {
                show : true,
                feature : {
                    mark : {show: true},
                    dataZoom : {show: true},
                    saveAsImage : {show: true},
                    dataView: {show: true}
                }
            },
            grid: {
                x: 80,
                y:30,
                x2:20,
                y2:40
            },
            xAxis : [
                {
                    type : 'category',
                    splitNumber:10,
                    position:'botttom',
                    boundaryGap : false,
                    axisLabel:{
                        show:true,
                        formatter : function(s) {
                            return s.slice(5, 20);
                        }

                    },
                    //axisTick: {onGap:false},
                    splitLine: {show:false},
                    data : axisData
                }
            ],
            yAxis : [
                {
                    type : 'value',
                    scale:true,
                    splitNumber: 1,
                    boundaryGap: [0.05, 0.05],
                    axisLabel: {
                        formatter: function (v) {
                            return Math.round(v) 
                        }
                    },
                    splitArea : {show : true}
                }
            ],
            dataZoom : {
                show : true,
                realtime: true,
                start : 0,
                end : 100
            },
            series : [
                {
                    name:'渗透度',
                    type:'line',
                    symbol: 'none',
                    data:attentiondata,
                }
            ]
        };
        var myChart3 = echarts.init(document.getElementById('main1'));
        myChart3.setOption(option);
    }

    function getattention_data(time) {
        var result=[];
        var domain = "other";
        var style = 3;
        var during = 900;
        var atime = time;
        var ts = 1377998100+900 * atime;
        var topic = "中国";
        
        $.ajax({
            url: "/propagate/attention/?ts=" + ts + "&domain=" + domain +"&style=" + style + "&during=" + during + "&topic=" + topic,
            type: "GET",
            dataType:"json",
            async:false,
            success: function(data){
                
               attention_list.push(data);

               ts_list.push(ts);
            }
        });


       
    }






    function quickness () {
        var time;
        for (time = 0 ; time < 60 ;time++)
        {
            getquickness_data(time);
        }
        //alert(quickness_list);
        //alert(ts_list);
        //console.log(ts_list);

        drawquickness(quickness_list,ts_list1);
    }

   

    function getquickness_data(time) {
        var result=[];
        var domain = "other";
        var style = 3;
        var during =900;
        var atime = time;
        var ts = 1377998100+900 * atime;
        var topic = "中国";
        
        $.ajax({
            url: "/propagate/quickness/?ts=" + ts + "&domain=" + domain +"&style=" + style  + "&topic=" + topic,
            type: "GET",
            dataType:"json",
            async:false,
            success: function(data){
                console.log(data);
                
               quickness_list.push(data);

               ts_list1.push(ts);
            }
        });


       
    }

     function drawquickness(quicknessdata,ts_data){

        var time_af=[];
            for (var i = 0; i < ts_data.length; i++){

                ns= new Date(parseInt(ts_data[i]) * 1000).toLocaleString();

                time_af.push(ns);
            }
        

        var axisData = time_af;
        var option = {
            title : {
                text: '爆发度曲线',
                x: 'center',
                y: 10,
                textStyle:{
                    fontSize: 12,
                    fontWeight: 'bolder',
                    color: '#333',
                    } 
            },
            tooltip : {
                trigger: 'axis',
                showDelay: 0             // 显示延迟，添加显示延迟可以避免频繁切换，单位ms
            },
            legend: {
                y : -30,
                data:['关注度','爆发度','渗透度']
            },
            toolbox: {
                show : true,
                feature : {
                    mark : {show: true},
                    dataZoom : {show: true},
                    saveAsImage : {show: true},
                    dataView: {show: true}
                }
            },
            grid: {
                x: 80,
                y:30,
                x2:20,
                y2:40
            },
            xAxis : [
                {
                    type : 'category',
                    position:'botttom',
                    boundaryGap : false,
                    axisLabel:{
                        show:true,
                        formatter : function(s) {
                            return s.slice(5, 20);
                        }

                    },
                    //axisTick: {onGap:false},
                    splitLine: {show:false},
                    data : axisData
                }
            ],
            yAxis : [
                {
                    type : 'value',
                    scale:true,
                    splitNumber:1,
                    boundaryGap: [0.05, 0.05],
                    axisLabel: {
                        formatter: function (v) {
                            return Math.round(v)+ '%'
                        }
                    },
                    splitArea : {show : true}
                }
            ],
            dataZoom : {
                show : true,
                realtime: true,
                start : 0,
                end : 100
            },
            series : [
                {
                    name:'渗透度',
                    type:'line',
                    symbol: 'none',
                    data:quicknessdata,
                }
            ]
        };
        var myChart3 = echarts.init(document.getElementById('main1'));
        myChart3.setOption(option);
    }




     function penetration () {
        var time;
        for (time = 0 ; time < 60 ;time++)
        {
            getpenetration_data(time);
        }
        //alert(penetration_list);
        //alert(ts_list);

        drawpenetration(penetration_list,ts_list2);
    }

   

    function getpenetration_data(time) {
        var result=[];
        var domain = "folk";
        var style = 3;
        var during =900;
        var atime = time;
        var ts = 1377998100+900 * atime;
        var topic = "中国";
        
        $.ajax({
            url: "/propagate/penetration/?ts=" + ts + "&domain=" + domain +"&style=" + style  + "&topic=" + topic,
            type: "GET",
            dataType:"json",
            async:false,
            success: function(data){
                console.log(data);
                
               penetration_list.push(data);

               ts_list2.push(ts);
            }
        });


       
    }

     function drawpenetration(penetrationdata,ts_data){

        var time_af=[];
            for (var i = 0; i < ts_data.length; i++){

                ns= new Date(parseInt(ts_data[i]) * 1000).toLocaleString();

                time_af.push(ns);
            }
            

        var axisData = time_af;
        var option = {
            title : {
                text: '渗透度曲线',
                x: 'center',
                y: 10,
                textStyle:{
                    fontSize: 12,
                    fontWeight: 'bolder',
                    color: '#333',
                    } 
            },
            tooltip : {
                trigger: 'axis',
                showDelay: 0             // 显示延迟，添加显示延迟可以避免频繁切换，单位ms
            },
            legend: {
                y : -30,
                data:['关注度','爆发度','渗透度']
            },
            toolbox: {
                show : true,
                feature : {
                    mark : {show: true},
                    dataZoom : {show: true},
                    saveAsImage : {show: true},
                    dataView: {show: true}
                }
            },
            grid: {
                x: 80,
                y:30,
                x2:20,
                y2:40
            },
            xAxis : [
                {
                    type : 'category',
                    position:'botttom',
                    boundaryGap : false,
                    axisLabel:{
                        show:true,
                        formatter : function(s) {
                            return s.slice(5, 20);
                        }

                    },
                    //splitNumber:60,

                    //axisTick: {onGap:false},
                    splitLine: {show:false},
                    data : axisData
                }
            ],
            yAxis : [
                {
                    type : 'value',
                    scale:true,
                    splitNumber:1,
                    boundaryGap: [0.05, 0.05],
                    axisLabel: {
                        formatter: function (v) {
                            return Math.round(v)+ '%'
                        }
                    },
                    splitArea : {show : true}
                }
            ],
            dataZoom : {
                show : true,
                realtime: true,
               start : 0,
                end : 100
             },
            series : [
                {
                    name:'渗透度',
                    type:'line',
                    symbol: 'none',
                    data:penetrationdata,
                }
            ]
        };
        var myChart3 = echarts.init(document.getElementById('main1'));
        myChart3.setOption(option);
    }
      
    </script>
    </div>
<div>
</body>
</html>